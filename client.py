import requests
import time
import random

# Simulate gathering spectral and quality data from a sensor
def gather_data():
    # Simulate an array of 227 intensity values and mango indices
    spectrum_data = [22868.833333333332,27736.0,31521.166666666668,34744.333333333336,38012.666666666664,42284.0,49493.0,55363.666666666664,61394.833333333336,67269.0,72096.5,76399.66666666667,80614.33333333333,84110.16666666667,87645.66666666667,91456.66666666667,95582.0,99915.66666666667,105390.5,109709.0,113268.16666666667,117131.0,120390.83333333333,123155.66666666667,125417.33333333333,127639.83333333333,129296.5,130849.33333333333,131752.66666666666,133009.16666666666,134099.66666666666,134775.16666666666,135589.0,136365.5,136888.5,137399.83333333334,137872.66666666666,138398.33333333334,138843.0,139281.16666666666,139627.16666666666,140266.5,141038.5,141407.33333333334,141829.83333333334,142782.16666666666,143415.0,143805.66666666666,144292.66666666666,145157.16666666666,145394.83333333334,145731.83333333334,146146.16666666666,146353.5,146304.83333333334,146101.83333333334,145498.66666666666,145070.33333333334,143431.66666666666,141265.5,138549.16666666666,135601.5,132434.0,129539.66666666667,127288.66666666667,125326.0,124321.16666666667,123992.33333333333,123804.66666666667,123903.5,124603.0,125523.0,126092.83333333333,127207.83333333333,128296.66666666667,129717.33333333333,130923.16666666667,132389.66666666666,134315.0,136369.83333333334,138417.83333333334,140528.33333333334,144381.0,147326.16666666666,150118.83333333334,153038.0,156121.5,159254.33333333334,161659.66666666666,164792.0,168053.5,171427.5,174243.83333333334,176896.5,180046.0,183954.5,186245.0,188736.66666666666,191605.0,193391.5,194893.5,196015.16666666666,196914.33333333334,197541.83333333334,197607.33333333334,197365.16666666666,197043.5,196174.66666666666,194843.16666666666,193307.0,191641.16666666666,189607.5,186940.33333333334,184308.66666666666,181754.83333333334,178597.66666666666,175563.16666666666,172877.5,170370.66666666666,167817.33333333334,163656.5,161264.66666666666,158589.66666666666,155859.16666666666,152477.66666666666,148914.5,144591.0,138761.33333333334,132364.5,125261.16666666667,118159.66666666667,110485.66666666667,102792.0,93786.66666666667,87914.16666666667,82960.33333333333,78695.16666666667,75290.0,72634.16666666667,70313.16666666667,68802.16666666667,67327.5,66191.33333333333,65506.833333333336,64641.166666666664,64102.0,63682.666666666664,63781.666666666664,63577.166666666664,63191.5,63501.833333333336,63498.5,63658.0,63906.5,64234.333333333336,65186.333333333336,65527.833333333336,66336.16666666667,67295.16666666667,68198.16666666667,69110.5,69870.83333333333,70506.33333333333,71471.16666666667,72308.5,72962.16666666667,73691.33333333333,74288.5,75004.33333333333,75959.33333333333,76452.83333333333,77328.5,77041.66666666667,78025.33333333333,78503.5,78760.66666666667,79231.5,79398.83333333333,79615.66666666667,79665.5,79980.33333333333,79515.33333333333,79553.5,79554.0,79368.83333333333,78789.66666666667,78385.16666666667,77958.0,77554.83333333333,77030.16666666667,76247.16666666667,75534.5,74742.5,73985.33333333333,72802.33333333333,71959.0,70607.83333333333,69612.5,68765.83333333333,67698.5,66382.83333333333,65274.833333333336,63924.0,62863.5,61495.0,60046.666666666664,58702.5,57557.166666666664,56045.166666666664,54090.5,52458.833333333336,50693.0,49289.0,47372.166666666664,45054.333333333336,43137.666666666664,40489.666666666664,37456.166666666664,34094.166666666664,30270.166666666668,26709.833333333332,21786.833333333332,18290.833333333332,15621.333333333334,13232.5,11015.166666666666,9457.333333333334,7970.333333333333]    
    mango_indices = {
        'Dry Matter': random.uniform(20, 25),  # example range
        'Sugar': random.uniform(10, 15),       # example range
        'Acid': random.uniform(1, 3),          # example range
        'Brix': random.uniform(10, 20)         # example range
    }
    return {'spectrum': spectrum_data, 'indices': mango_indices}

# server_url = 'http://127.0.0.1:5000/data'
server_url = 'http://169.254.152.178:5000/data'

while True:
    data = gather_data()
    print(data)
    # Post data to the server
    requests.post(server_url, json=data)
    time.sleep(5)  # Send data every 5 seconds
